#!/bin/bash
# OBJETIVO: Criar um script para identificar possiveis hosts em um domínio.
# O usuário deve informar o domínio e caso o site possua subdomínios na página, ele deve retornar o IP dos hosts.

if [ "$1" == "" ]
then
    echo ">>>>PARSING HTML<<<<"
    echo "Modo de uso: $0 [DOMÍNIO]"
    echo "Exemplo: $0 exemplo.com.br"
else
    wget "$1";
    grep href index.html | cut -d "/" -f3 | grep "\." | cut -d '"' -f1 | grep -v "<l" > lista."$1".txt;

    echo ________________ >> lista."$1".txt;

    for url in $(cat lista."$1".txt)
    do
        host "$url" | grep "has address" >> lista."$1".txt;
    done

    echo "Salvar index.html ?[s/n]"
    read escolhaIndex
    if [ "$escolhaIndex" == "n" ]
    then
        rm index.html;
        echo -e "\e[33;5m index.html APAGADO!\e[0m"
    fi

    echo " "

    cat lista."$1".txt;
    echo " "
    echo "Salvar lista.""$1"".txt ?[s/n]"
    read escolhaLista
    if [ "$escolhaLista" == "n" ] 
    then
        rm lista."$1".txt;
        echo -e "\e[33;5m lista.""$1"".txt APAGADA!\e[0m"
    fi
fi