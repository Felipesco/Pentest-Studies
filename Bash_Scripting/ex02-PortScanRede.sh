#!/bin/bash
# Exercício
# OBJETIVO: Criar um script para descobrir quais hosts na rede possuem uma determinada porta aberta.
# O usuário deve informar a rede e o script deve retornar os hosts que possuem a porta 80 aberta.   

if [ "$1" == "" ] || [ "$2" == "" ]
then 
    echo ">>>>PORTSCAN REDE<<<<"
    echo "Modo de uso: $0 [REDE] [PORTA]"
    echo "Exemplo: $0 123.123.0 80"
else 
    echo "Procurando portas abertas..."
    for host in {1..254}
    do
        hping3 -S -p "$2" -c 1 "$1"."$host" 2> /dev/null | grep "flags=SA"; # 2> /dev/null é para descartar as mensagens de erro
        # 1> STDOUT 
        # STDOUT é tudo que é a gente vê em tela
        #
        # 2> STDERR
        # STDERR é tudo que é considerado como erro
    done
fi