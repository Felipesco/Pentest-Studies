# Semelhante ao test005, porém nesse script o usuário irá passar o ip e o script vai ver quais as portas disponíveis 

param($ip)

if (!$ip){
    echo ">>>>PORTSCAN<<<<"
    echo "Modo de uso: .\test005.ps1 [IP or SITE]"
    echo "Exemplo: .\test.ps1 127.0.0.1"

} else{
    $topPortas = 21,22,23,25,53,67,68,69,80,110,123,137,143,177,3306

    echo "Procurando as Top Portas abertas no Host: $ip"

    foreach ($porta in $topPortas){
        if (Test-NetConnection $ip -Port $porta -WarningAction SilentlyContinue -InformationLevel Quiet) {
            echo "Porta $porta >>> ABERTA <<<"
        } 
    }        
}